!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ExifReader=t():e.ExifReader=t()}("undefined"!=typeof self?self:this,(function(){return function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:1,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:1})}},t={};function n(e,t,n){for(var i=[],o=0;o<n&&t+o<e.byteLength;o++)i.push(e.getUint8(t+o));return r(i)}function r(e){return e.map((function(e){return String.fromCharCode(e)})).join("")}function i(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}e.r(t),e.d(t,{default:function(){return et},errors:function(){return tt},load:function(){return nt},loadView:function(){return it}});var o=void 0;function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function u(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return e+""}(e);return"symbol"==f(t)?t:t+""}var a=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e){return"object"!==f(e)||void 0===e.length||void 0===e.readUInt8||void 0===e.readUInt16LE||void 0===e.readUInt16BE||void 0===e.readUInt32LE||void 0===e.readUInt32BE||void 0===e.readInt32LE||void 0===e.readInt32BE}(t))throw Error("DataView: Passed buffer type is unsupported.");this.buffer=t,this.byteLength=this.buffer.length},(t=[{key:"getUint8",value:function(e){return this.buffer.readUInt8(e)}},{key:"getUint16",value:function(e,t){return t?this.buffer.readUInt16LE(e):this.buffer.readUInt16BE(e)}},{key:"getUint32",value:function(e,t){return t?this.buffer.readUInt32LE(e):this.buffer.readUInt32BE(e)}},{key:"getInt32",value:function(e,t){return t?this.buffer.readInt32LE(e):this.buffer.readInt32BE(e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||0,r.configurable=1,"value"in r&&(r.writable=1),Object.defineProperty(e,u(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:0}),e;var e,t}();function c(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}var s=2,d=65496,p=2,g=4,l=2,v=10,y=65472,h=65474,m=65476,b=65499,A=65501,S=65498,T=65504,w=65505,x=65519,P=65534,U=65535,E="Exif";function L(e,t){var r=E.length;return e.getUint16(t)===w&&n(e,t+g,r)===E&&0===e.getUint8(t+g+r)}function I(e,t){var n=e.getUint16(t);return n>=T&&n<=x||n===P||n===y||n===h||n===m||n===b||n===A||n===S}function O(e,t){return e.getUint16(t)===U}var k="Â‰PNG\r\n\n",B=4,C=4,_=0,D=B,R=B+C,j="tEXt",M="iTXt",N="zTXt",G="pHYs",z="tIME",F="eXIf";function V(e,t,r){var i=n(e,t+D,C);return i===j||i===M||i===N&&r}function H(e,t){return n(e,t+D,C)===F}function X(e,t){var r=[G,z],i=n(e,t+D,C);return r.includes(i)}var Y={parseAppMarkers:function(e,t){if(function(e){return!!e&&e.byteLength>=s&&e.getUint16(0)===d}(e))return W(function(e){for(var t,n,r=p;r+g+5<=e.byteLength;){if(L(e,r))t=e.getUint16(r+l),n=r+v;else{if(!I(e,r)){if(O(e,r)){r++;continue}break}t=e.getUint16(r+l)}r+=l+t}return{hasAppMarkers:r>p,fileDataOffset:void 0,jfifDataOffset:void 0,tiffHeaderOffset:n,iptcDataOffset:void 0,xmpChunks:void 0,iccChunks:void 0,mpfDataOffset:void 0}}(e),"jpeg","JPEG");if(function(e){return!!e&&n(e,0,k.length)===k}(e))return W(function(e,t){for(var r={hasAppMarkers:0},i=k.length;i+B+C<=e.byteLength;){if(V(e,i,t)){r.hasAppMarkers=1;var o=n(e,i+D,C);r.pngTextChunks||(r.pngTextChunks=[]),r.pngTextChunks.push({length:e.getUint32(i+_),type:o,offset:i+R})}else H(e,i)?(r.hasAppMarkers=1,r.tiffHeaderOffset=i+R):X(e,i)&&(r.hasAppMarkers=1,r.pngChunkOffsets||(r.pngChunkOffsets=[]),r.pngChunkOffsets.push(i+_));i+=e.getUint32(i+_)+B+C+4}return r}(e,t),"png","PNG");if(function(e){return!!e&&"RIFF"===n(e,0,4)&&"WEBP"===n(e,8,4)}(e))return W(function(e){for(var t,r,i=12,o=0;i+8<e.byteLength;){var f=n(e,i,4),u=e.getUint32(i+4,1);"EXIF"===f?(o=1,t="Exif\0\0"===n(e,i+8,6)?i+8+6:i+8):"VP8X"===f&&(o=1,r=i+8),i+=8+(u%2==0?u:u+1)}return{hasAppMarkers:o,tiffHeaderOffset:t,xmpChunks:void 0,iccChunks:void 0,vp8xChunkOffset:r}}(e),"webp","WebP");throw Error("Invalid image format")}};function W(e,t,n){return i({},e,{fileType:{value:t,description:n}})}var q=18761,K=q,J={274:{name:"Orientation",description:function(e){return 1===e?"top-left":2===e?"top-right":3===e?"bottom-right":4===e?"bottom-left":5===e?"left-top":6===e?"right-top":7===e?"right-bottom":8===e?"left-bottom":"Undefined"}},34665:"Exif IFD Pointer"};function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function Q(e,t,n){return(t=function(e){var t=function(e){if("object"!=$(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return e+""}(e);return"symbol"==$(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:1,configurable:1,writable:1}):e[t]=n,e}var Z=i({},J,{}),ee="exif",te="interoperability",ne=Q(Q(Q(Q(Q(Q(Q({},"0th",Z),"1st",J),ee,Z),"gps",{}),te,{}),"mpf",{}),"canon",{}),re={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},ie={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},oe={getAsciiValue:function(e){return e.map((function(e){return String.fromCharCode(e)}))},getByteAt:fe,getAsciiAt:function(e,t){return e.getUint8(t)},getShortAt:function(e,t,n){return e.getUint16(t,n===K)},getLongAt:ue,getRationalAt:function(e,t,n){return[ue(e,t,n),ue(e,t+4,n)]},getUndefinedAt:function(e,t){return fe(e,t)},getSlongAt:ae,getSrationalAt:function(e,t,n){return[ae(e,t,n),ae(e,t+4,n)]},getIfdPointerAt:function(e,t,n){return ue(e,t,n)},typeSizes:re,tagTypes:ie,getTypeSize:function(e){if(void 0===ie[e])throw Error("No such type found.");return re[ie[e]]}};function fe(e,t){return e.getUint8(t)}function ue(e,t,n){return e.getUint32(t,n===K)}function ae(e,t,n){return e.getInt32(t,n===K)}var ce={1:oe.getByteAt,2:oe.getAsciiAt,3:oe.getShortAt,4:oe.getLongAt,5:oe.getRationalAt,7:oe.getUndefinedAt,9:oe.getSlongAt,10:oe.getSrationalAt,13:oe.getIfdPointerAt};function se(e,t,n,r,i,o){var f=oe.getTypeSize("SHORT"),u={},a=function(e,t,n){return t+oe.getTypeSize("SHORT")<=e.byteLength?oe.getShortAt(e,t,n):0}(e,r,i);r+=f;for(var c=0;c<a&&!(r+12>e.byteLength);c++){var s=de(e,t,n,r,i,o);void 0!==s&&(u[s.name]={id:s.id,value:s.value,description:s.description},"MakerNote"===s.name&&(u[s.name].__offset=s.__offset)),r+=12}return u}function de(e,t,n,r,i,o){var f,u,a=oe.getTypeSize("SHORT"),c=a+oe.getTypeSize("SHORT"),s=c+oe.getTypeSize("LONG"),d=oe.getShortAt(e,r,i),p=oe.getShortAt(e,r+a,i),g=oe.getLongAt(e,r+c,i);if(void 0!==oe.typeSizes[p]&&(o||void 0!==ne[t][d])){f=function(e,t){return oe.typeSizes[e]*t<=oe.getTypeSize("LONG")}(p,g)?pe(e,u=r+s,p,g,i):function(e,t,n,r,i){return t+n+oe.typeSizes[r]*i<=e.byteLength}(e,n,u=oe.getLongAt(e,r+s,i),p,g)?pe(e,n+u,p,g,i,33723===d):"<faulty value>",p===oe.tagTypes.ASCII&&(f=function(e){try{return e.map((function(e){return decodeURIComponent(escape(e))}))}catch(t){return e}}(f=function(e){for(var t=[],n=0,r=0;r<e.length;r++)"\0"!==e[r]?(void 0===t[n]&&(t[n]=""),t[n]+=e[r]):n++;return t}(f)));var l="undefined-".concat(d),v=f;if(void 0!==ne[t][d])if(void 0!==ne[t][d].name&&void 0!==ne[t][d].description){l=ne[t][d].name;try{v=ne[t][d].description(f)}catch(e){v=ge(f)}}else p===oe.tagTypes.RATIONAL||p===oe.tagTypes.SRATIONAL?(l=ne[t][d],v=""+f[0]/f[1]):(l=ne[t][d],v=ge(f));return{id:d,name:l,value:f,description:v,__offset:u}}}function pe(e,t,n,r,i){var o=[];arguments.length>5&&void 0!==arguments[5]&&arguments[5]&&(r*=oe.typeSizes[n],n=oe.tagTypes.BYTE);for(var f=0;f<r;f++)o.push(ce[n](e,t,i)),t+=oe.typeSizes[n];return n===oe.tagTypes.ASCII?o=oe.getAsciiValue(o):1===o.length&&(o=o[0]),o}function ge(e){return e instanceof Array?e.join(", "):e}var le="Exif IFD Pointer",ve="GPS Info IFD Pointer",ye="Interoperability IFD Pointer",he={read:function(e,t,n){var r=function(e,t){if(e.getUint16(t)===q)return q;if(19789===e.getUint16(t))return 19789;throw Error("Illegal byte order value. Faulty image.")}(e,t),i=function(e,t,n,r){return se(e,"0th",t,function(e,t,n){return t+oe.getLongAt(e,t+4,n)}(e,t,n),n,r)}(e,t,r,n);return{tags:i=Ae(i=be(i=me(i,e,t,r,n),e,t,r,n),e,t,r,n),byteOrder:r}}};function me(e,t,n,r,o){return void 0!==e[le]?i(e,se(t,ee,n,n+e[le].value,r,o)):e}function be(e,t,n,r,o){return void 0!==e[ve]?i(e,se(t,"gps",n,n+e[ve].value,r,o)):e}function Ae(e,t,n,r,o){return void 0!==e[ye]?i(e,se(t,te,n,n+e[ye].value,r,o)):e}var Se=function(e,t){var n=function(){if("undefined"!=typeof TextDecoder)return TextDecoder}();if("undefined"!=typeof n&&void 0!==e)try{return new n(e).decode(t instanceof DataView?t.buffer:Uint8Array.from(t))}catch(e){}return function(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}(t.map((function(e){return String.fromCharCode(e)})).join(""))};function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}var we={read:function(e,t,n,r){for(var i={},o=[],f=0;f<t.length;f++){var u=t[f],a=Be(e,u.offset,u.length,u.type,n);if(a instanceof Promise)o.push(a.then((function(e){var t,n,i,o=e.name,f=e.value,u=e.description;try{if(Me(o,f))return{__exif:he.read(Ge(f),ke,r).tags};if(o&&!Me(o,f)&&!Ne(o,f))return t={},i={value:f,description:u},(n=function(e){var t=function(e){if("object"!=Te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return e+""}(e);return"symbol"==Te(t)?t:t+""}(n=o))in t?Object.defineProperty(t,n,{value:i,enumerable:1,configurable:1,writable:1}):t[n]=i,t}catch(e){}return{}})));else{var c=a.name,s=a.value,d=a.description;c&&(i[c]={value:s,description:d})}}return{readTags:i,readTagsPromise:o.length>0?Promise.all(o):void 0}}},xe="STATE_KEYWORD",Pe="STATE_COMPRESSION",Ue="STATE_LANG",Ee="STATE_TRANSLATED_KEYWORD",Le="STATE_TEXT",Ie=1,Oe=1,ke=6;function Be(e,t,n,r,i){for(var f,u=[],a=[],c=[],s=xe,d=o,p=0;p<n&&t+p<e.byteLength;p++)if(s!==Pe){if(s===Le){f=new DataView(e.buffer.slice(t+p,t+n));break}var g=e.getUint8(t+p);0===g?s=_e(r,s):s===xe?u.push(g):s===Ue?a.push(g):s===Ee&&c.push(g)}else d=Ce({type:r,dataView:e,offset:t+p}),r===M&&(p+=Ie),s=_e(r,s);if(d!==o&&!i)return{};var l=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"string";if(0===t&&"function"==typeof DecompressionStream){var i=new DecompressionStream("deflate"),o=new Blob([e]).stream().pipeThrough(i);return"dataview"===r?new Response(o).arrayBuffer().then((function(e){return new DataView(e)})):new Response(o).arrayBuffer().then((function(e){return new TextDecoder(n).decode(e)}))}return void 0!==t?Promise.reject("Unknown compression method ".concat(t,".")):e}(f,d,function(e){return e===j||e===N?"latin1":"utf-8"}(r));return l instanceof Promise?l.then((function(e){return De(e,r,a,u)})).catch((function(){return De("<text using unknown compression>".split(""),r,a,u)})):De(l,r,a,u)}function Ce(e){var t=e.type,n=e.dataView,r=e.offset;if(t===M){if(n.getUint8(r)===Oe)return n.getUint8(r+1)}else if(t===N)return n.getUint8(r);return o}function _e(e,t){return t===xe&&[M,N].includes(e)?Pe:t===Pe?e===M?Ue:Le:t===Ue?Ee:Le}function De(e,t,r,i){var o=function(e){return e instanceof DataView?n(e,0,e.byteLength):e}(e);return{name:Re(t,r,i),value:o,description:t===M?je(e):o}}function Re(e,t,n){var i=r(n);if(e===j||0===t.length)return i;var o=r(t);return"".concat(i," (").concat(o,")")}function je(e){return Se("UTF-8",e)}function Me(e,t){return"raw profile type exif"===e.toLowerCase()&&"exif"===t.substring(1,5)}function Ne(e,t){return"raw profile type iptc"===e.toLowerCase()&&"iptc"===t.substring(1,5)}function Ge(e){return function(e){for(var t=new DataView(new ArrayBuffer(e.length/2)),n=0;n<e.length;n+=2)t.setUint8(n/2,parseInt(e.substring(n,n+2),16));return t}(e.match(/\n(exif|iptc)\n\s*\d+\n([\s\S]*)$/)[2].replace(/\n/g,""))}var ze={read:function(e,t){for(var r={},i=0;i<t.length;i++){var o=oe.getLongAt(e,t[i]+_),f=n(e,t[i]+D,C);f===G?(r["Pixels Per Unit X"]=Fe(e,t[i],o),r["Pixels Per Unit Y"]=Ve(e,t[i],o),r["Pixel Units"]=He(e,t[i],o)):f===z&&(r["Modify Date"]=Xe(e,t[i],o))}return r}};function Fe(e,t,n){if(Ye(e,t,n,0,4)){var r=oe.getLongAt(e,t+R+0);return{value:r,description:""+r}}}function Ve(e,t,n){if(Ye(e,t,n,4,4)){var r=oe.getLongAt(e,t+R+4);return{value:r,description:""+r}}}function He(e,t,n){if(Ye(e,t,n,8,1)){var r=oe.getByteAt(e,t+R+8);return{value:r,description:1===r?"meters":"Unknown"}}}function Xe(e,t,n){if(Ye(e,t,n,0,7)){var r=oe.getShortAt(e,t+R),i=oe.getByteAt(e,t+R+2),o=oe.getByteAt(e,t+R+3),f=oe.getByteAt(e,t+R+4),u=oe.getByteAt(e,t+R+5),a=oe.getByteAt(e,t+R+6);return{value:[r,i,o,f,u,a],description:"".concat(We(r,4),"-").concat(We(i,2),"-").concat(We(o,2)," ").concat(We(f,2),":").concat(We(u,2),":").concat(We(a,2))}}}function Ye(e,t,n,r,i){return r+i<=n&&t+R+r+i<=e.byteLength}function We(e,t){return"".concat("0".repeat(t-(""+e).length)).concat(e)}var qe={read:function(e,t){var n={},r=oe.getByteAt(e,t);return n.Alpha=function(e){var t=16&e;return{value:t?1:0,description:t?"Yes":"No"}}(r),n.Animation=function(e){var t=2&e;return{value:t?1:0,description:t?"Yes":"No"}}(r),n.ImageWidth=$e(e,t+Ke),n.ImageHeight=$e(e,t+Je),n}},Ke=4,Je=7;function $e(e,t){var n=oe.getByteAt(e,t)+256*oe.getByteAt(e,t+1)+65536*oe.getByteAt(e,t+2)+1;return{value:n,description:n+"px"}}function Qe(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=Error().stack}Qe.prototype=Error();var Ze={MetadataMissingError:Qe},et={load:nt,loadView:it,errors:Ze},tt=Ze;function nt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){return"string"==typeof e}(e)?(n.async=1,function(e,t){return/^\w+:\/\//.test(e)?"undefined"!=typeof fetch?function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).length,n={method:"GET"};return Number.isInteger(t)&&t>=0&&(n.headers={range:"bytes=0-".concat(t-1)}),fetch(e,n).then((function(e){return e.arrayBuffer()}))}(e,t):function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).length;return new Promise((function(n,r){var i={};Number.isInteger(t)&&t>=0&&(i.headers={range:"bytes=0-".concat(t-1)});var o=function(e){return/^https:\/\//.test(e)?require("https").get:require("http").get}(e);o(e,i,(function(e){if(e.statusCode>=200&&e.statusCode<=299){var t=[];e.on("data",(function(e){return t.push(Buffer.from(e))})),e.on("error",(function(e){return r(e)})),e.on("end",(function(){return n(Buffer.concat(t))}))}else r("Could not fetch file: ".concat(e.statusCode," ").concat(e.statusMessage)),e.resume()})).on("error",(function(e){return r(e)}))}))}(e,t):function(e){return/^data:[^;,]*(;base64)?,/.test(e)}(e)?Promise.resolve(function(e){var t=e.substring(e.indexOf(",")+1);if(-1!==e.indexOf(";base64")){if("undefined"!=typeof atob)return Uint8Array.from(atob(t),(function(e){return e.charCodeAt(0)})).buffer;if("undefined"==typeof Buffer)return;return"undefined"!=typeof Buffer.from?Buffer.from(t,"base64"):new Buffer(t,"base64")}var n=decodeURIComponent(t);return"undefined"!=typeof Buffer?"undefined"!=typeof Buffer.from?Buffer.from(n):new Buffer(n):Uint8Array.from(n,(function(e){return e.charCodeAt(0)})).buffer}(e)):function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).length;return new Promise((function(n,r){var i=function(){try{return require("fs")}catch(e){return}}();i.open(e,(function(o,f){o?r(o):i.stat(e,(function(o,u){if(o)r(o);else{var a=Math.min(u.size,void 0!==t?t:u.size),c=Buffer.alloc(a),s={buffer:c,length:a};i.read(f,s,(function(t){t?r(t):i.close(f,(function(t){t&&console.warn("Could not close file ".concat(e,":"),t),n(c)}))}))}}))}))}))}(e,t)}(e,n).then((function(e){return rt(e,n)}))):function(e){return"undefined"!=typeof window&&"undefined"!=typeof File&&e instanceof File}(e)?(n.async=1,(t=e,new Promise((function(e,n){var r=new FileReader;r.onload=function(t){return e(t.target.result)},r.onerror=function(){return n(r.error)},r.readAsArrayBuffer(t)}))).then((function(e){return rt(e,n)}))):rt(e,n)}function rt(e,t){return function(e){try{return Buffer.isBuffer(e)}catch(e){return 0}}(e)&&(e=new Uint8Array(e).buffer),it(function(e){try{return new DataView(e)}catch(t){return new a(e)}}(e),t)}function it(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{expanded:0,async:0,includeUnknown:0},n=t.expanded,r=void 0===n?0:n,o=t.async,f=void 0===o?0:o,u=t.includeUnknown,a=void 0===u?0:u,s=0,d={},p=[],g=Y.parseAppMarkers(e,f),l=g.fileType,v=(g.fileDataOffset,g.jfifDataOffset,g.tiffHeaderOffset),y=(g.iptcDataOffset,g.xmpChunks,g.iccChunks,g.mpfDataOffset,g.pngHeaderOffset,g.pngTextChunks),h=g.pngChunkOffsets,m=g.vp8xChunkOffset;if(g.gifHeaderOffset,function(e){return void 0!==e}(v)){s=1;var b=he.read(e,v,a),A=b.tags;b.byteOrder,A.Thumbnail&&(d.Thumbnail=A.Thumbnail,delete A.Thumbnail),r?(d.exif=A,function(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=c(e.exif.GPSLatitude.value),"S"===e.exif.GPSLatitudeRef.value.join("")&&(e.gps.Latitude=-e.gps.Latitude)}catch(e){}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=c(e.exif.GPSLongitude.value),"W"===e.exif.GPSLongitudeRef.value.join("")&&(e.gps.Longitude=-e.gps.Longitude)}catch(e){}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],1===e.exif.GPSAltitudeRef.value&&(e.gps.Altitude=-e.gps.Altitude)}catch(e){}}}(d)):d=i({},d,A),A.MakerNote&&delete A.MakerNote.__offset}if(function(e){return void 0!==e}(y)){s=1;var S=we.read(e,y,f,a),T=S.readTags,w=S.readTagsPromise;U(T),w&&p.push(w.then((function(e){return e.forEach(U)})))}if(function(e){return void 0!==e}(h)){s=1;var x=ze.read(e,h);r?d.png=d.png?i({},d.png,x):x:d=i({},d,x)}if(function(e){return void 0!==e}(m)){s=1;var P=qe.read(e,m);r?d.riff=d.riff?i({},d.riff,P):P:d=i({},d,P)}if(delete d.Thumbnail,l&&(r?(d.file||(d.file={}),d.file.FileType=l):d.FileType=l,s=1),!s)throw new Ze.MetadataMissingError;return f?Promise.all(p).then((function(){return d})):d;function U(e){if(r){for(var t=0,n=["exif","iptc"];t<n.length;t++){var o=n[t],f="__".concat(o);e[f]&&(d[o]=d[o]?i({},d.exif,e[f]):e[f],delete e[f])}d.png=d.png?i({},d.png,e):e,d.pngText=d.pngText?i({},d.png,e):e}else delete(d=i({},d,e.__exif?e.__exif:{},e.__iptc?e.__iptc:{},e)).__exif,delete d.__iptc}}return t}()}));
//# sourceMappingURL=exif-reader.js.map